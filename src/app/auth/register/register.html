<div class="register-container">
  <div class="register-box">
    <h1 class="register-title">PharmaTrace</h1>
    <p class="register-subtitle">
      Crea tu cuenta para comenzar a usar el sistema de trazabilidad farmacéutica.
    </p>

    @if(registerError) {
      <div class="error-alert">
        {{ registerError }}
      </div>
    }

    <form (ngSubmit)="onSubmit()" #registerForm="ngForm" novalidate>
      <div class="form-group">
        <label for="username">Usuario</label>
        <input
          type="text"
          id="username"
          name="username"
          [(ngModel)]="registerData.username"
          required
          #username="ngModel"
          placeholder="Nombre de usuario"
        />
        @if(username.invalid && username.touched) {
          <div class="field-error">El usuario es obligatorio.</div>
        }
      </div>

      <div class="form-group">
        <label for="email">Correo electrónico</label>
        <input
          type="email"
          id="email"
          name="email"
          [(ngModel)]="registerData.email"
          required
          #email="ngModel"
          placeholder="usuario@pharmatrace.pe"
        />
        @if(email.invalid && email.touched) {
          <div class="field-error">Ingresa un correo válido.</div>
        }
      </div>

      <div class="form-group">
        <label for="password">Contraseña</label>
        <input
          type="password"
          id="password"
          name="password"
          [(ngModel)]="registerData.password"
          required
          #password="ngModel"
          placeholder="••••••••"
        />
        @if(password.invalid && password.touched) {
          <div class="field-error">La contraseña es obligatoria.</div>
        }
      </div>

      <div class="form-group">
        <label for="role">Rol</label>
        <select
          id="role"
          name="role"
          [(ngModel)]="registerData.role"
          required
          #role="ngModel"
        >
          <option value="" disabled selected>Seleccione un rol</option>
          @for(role of ['admin', 'lab', 'dist', 'pharma']; track role) {
            <option [value]="role">
              {{ role }}
            </option>
          }
        </select>
        @if(role.invalid && role.touched) {
          <div class="field-error">Selecciona un rol.</div>
        }
      </div>

      <button
        type="submit"
        [disabled]="registerForm.invalid"
        class="btn-register"
      >
        Registrar
      </button>

      <div class="register-footer">
        <a routerLink="/login">¿Ya tienes cuenta? Inicia sesión</a>
      </div>
    </form>
  </div>
</div>
